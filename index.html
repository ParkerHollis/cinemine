<html>
  <head>
  <title>Nodes</title>
  <script src="/socket.io/socket.io.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  <style>
  h1,h2,h3 {
	font-family:Helvetica;
  }
  </style>
  </head>
  <body>
	<div>
	<h1 style="text-align:center;">Nodes</h1>
	</div>
	<div id="probes">
    <script>
      var socket = io();
      socket.on('IPList', function(msg){
        var IPList = msg;
        IPList.forEach(function(item) {
		  var address = item.split("|")[0];
		  var friendlyName = item.split("|")[1];
		  $('#probes').append('<h1 id="'+friendlyName+'">Connecting...<h3>'+friendlyName+' @ '+address+'</h3></h1><br>');
        })
      });

      socket.on('data', function(msg){
        var location = msg.split("|")[0];
        var uptime = msg.split("|")[1];
		var usedMem = msg.split("|")[2];
		var totalMem = msg.split("|")[3];
		convertTime(uptime);
        $('#'+location).html(days+'d '+hours+'h '+minutes+'m '+sec+'s');
      });
    </script>
	</div>
  <script>
  function convertTime(seconds) {
	ms = seconds*1000;
	days = Math.floor(ms / 86400000);
	hours = Math.floor(ms / 3600000) - (days*24);
	minutes = Math.floor((ms % 3600000) / 60000);
	sec = Math.floor(((ms % 360000) % 60000) / 1000);
	}
  </script>
  </body>
</html>